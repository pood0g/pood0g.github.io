<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orro eSIM QR Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
</head>

<style>
    h1 {
        font-family: "Space Grotesk", sans-serif;
        font-size: 56px;
        font-weight: 400;
        line-height: 64px;
    }
    label, button, input {
        font-family: "Space Grotesk", sans-serif;
        font-size: 16px;
        font-weight: 400;
        line-height: 40px;
    }
</style>

<body>
    <div>
        <h1 class="orroFont">
            <img id="orroLogo" src="img/orro.png" alt="" width="60">
            QR Generator
        </h1>
    </div>
    <div>
        <label for="eSIMNo">eSIM Number:</label>
        <input type="text" id="eSIMNo" name="eSIMNo" placeholder="Enter your eSIM number" onkeyup="handleEnterKey(this.keyCode)">
        <button onclick="generateQR()">GO!</button>
    </div>
    <!-- Empty div for QR code to display -->
    <div id="qrCodeDisplay"></div>
</body>
<script src="js/kjua.min.js" integrity="sha512-BYj4xggowR7QD150VLSTRlzH62YPfhpIM+b/1EUEr7RQpdWAGKulxWnOvjFx1FUlba4m6ihpNYuQab51H6XlYg==" crossorigin="anonymous"></script>

<script>
    function generateQR() {
        document.getElementById('qrCodeDisplay').innerHTML = "";
        var svgLogo = document.getElementById('orroLogo');
        var qrContent = document.getElementById('eSIMNo').value;
        console.log(qrContent.length)
        var logoSize = qrContent.length > 120 ? 20 : 30
        var qrImageSize = qrContent.length > 450 ? 600 : 300
        var el = kjua({
            text: qrContent,
            ecLevel: 'H',
            size: 300,
            fill: '#00002a',
            back: '#ffffff',
            quiet: 0,
            rounded: 40,
            mode: 'image',
            image: svgLogo,
            mSize: logoSize,
        });
        el.filename = 'helloWorld!';
        document.getElementById('qrCodeDisplay').appendChild(el);
    };

    function handleEnterKey(keyCode) {
        if (keyCode === 13) {
            generateQR();
        };
    }
</script>

</html>